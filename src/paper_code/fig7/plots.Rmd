---
title: "plots"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir="~/Desktop/BIODS215/project/paper_code/table2/")
```

```{r}
library(ggplot2)
library(reshape2)
library(rcompanion)
data = read.csv("day_hour.csv", row.names=1)
head(data)

mae = abs(data - data$y)[, c('kmeans', 'nmf', 'pca', 'dft')]

melted = melt(mae)
head(melted)

sum = groupwiseMean(data=melted, var = 'value', group='variable')

p1 = ggplotGrob(ggplot(data=sum, aes(variable, Mean, col=variable)) + geom_point() + geom_errorbar(aes(ymin=Trad.lower, ymax=Trad.upper, width=0.25)) + ylab("mean absolute error") +theme(axis.title.x = element_blank(), legend.position='none')+ theme(axis.title.x = element_blank(), legend.title = element_blank()) + ggtitle("Performance (daily scale)") + coord_cartesian(ylim=c(3.5,9)))


data = read.csv("week_hour.csv", row.names=1)
head(data)

mae = abs(data - data$y)[, c('kmeans', 'nmf', 'pca', 'dft')]

melted = melt(mae)
head(melted)

sum = groupwiseMean(data=melted, var = 'value', group='variable')

p2 = ggplotGrob(ggplot(data=sum, aes(variable, Mean, col=variable)) + geom_point() + geom_errorbar(aes(ymin=Trad.lower, ymax=Trad.upper, width=0.25)) + ylab("mean absolute error") + ggtitle("Performance (weekly scale)") + theme(axis.title.y=element_blank(), axis.title.x=element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank(), legend.title = element_blank()) + coord_cartesian(ylim=c(3.5,9)))

g2= cbind(p1, p2, size='last')
g = arrangeGrob(g2)


ggsave('performance.png', g)
```


